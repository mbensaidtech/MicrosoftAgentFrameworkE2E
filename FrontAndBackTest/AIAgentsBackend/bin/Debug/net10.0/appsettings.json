{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },

  "AzureOpenAI": {
    "Endpoint": "https://YOUR-RESOURCE.openai.azure.com/",
    "DefaultChatDeploymentName": "YOUR-DEPLOYMENT-NAME",
    "APIKey": "YOUR-API-KEY",
    "DefaultEmbeddingDeploymentName": "YOUR-EMBEDDING-DEPLOYMENT-NAME"
  },

  "MongoDB": {
    "ConnectionString": "mongodb://localhost:27017/?directConnection=true",
    "DatabaseName": "aiagents_db",
    "ThreadMessagesCollectionName": "chat_history",
    "ChatMessageStoreCollectionName": "chat_history",
    "CustomerSellerConversationCollectionName": "customer_seller_conversations",
    "OrdersCollectionName": "orders",
    "OrderStatusesCollectionName": "order_statuses"
  },

  "OrderData": {
    "InitializeOnStartup": false,
    "DataDirectory": "Data",
    "OrdersFileName": "orders.json",
    "OrderStatusesFileName": "order-statuses.json"
  },

  "VectorStore": {
    "InitializeOnStartup": false,
    "DataDirectory": "Data/VectorStore",
    "Collections": {
      "ReturnPolicy": {
        "Enabled": true,
        "CollectionName": "return-policy",
        "DataFileName": "return-policy.json"
      },
      "RefundPolicy": {
        "Enabled": true,
        "CollectionName": "refund-policy",
        "DataFileName": "refund-policy.json"
      },
      "OrderCancellationPolicy": {
        "Enabled": true,
        "CollectionName": "order-cancellation-policy",
        "DataFileName": "order-cancellation-policy.json"
      },
      "SellerRequirements": {
        "Enabled": true,
        "CollectionName": "seller-requirements",
        "DataFileName": "seller-requirements.json"
      }
    }
  },

  "AIAgents": {
    "Agents": {
      "translation": {
        "AgentId": "translation",
        "Name": "Translation Agent",
        "Description": "Translates text between languages preserving context and tone.",
        "Instructions": "You are an expert translator. Translate text accurately while preserving tone and style. If target language is not specified, ask for clarification.",
        "Temperature": 0.5,
        "MaxOutputTokens": 1000,
        "Version": "1.0.0",
        "Streaming": false,
        "Url": "http://localhost:5016/a2a/translationAgent",
        "SkillId": "translation_agent_translate",
        "SkillName": "Translate",
        "SkillDescription": "Translates text between languages while preserving context, tone, and cultural nuances.",
        "Tags": ["translation", "language", "localization"],
        "Examples": [
          "Translate 'Hello World' to French",
          "Translate this text to Spanish: Good morning",
          "Convert this English text to German"
        ]
      },
      "customer-support": {
        "AgentId": "customer-support",
        "Name": "Customer Support Agent",
        "Description": "Handles general customer inquiries and provides helpful responses using policy knowledge base.",
        "Instructions": "You are a friendly customer support assistant. Welcome customers, listen to their questions, and provide accurate information.\n\nYou have access to the following tools to search company policies in our Knowledge Base:\n- SearchReturnPolicy: Use when customers ask about returns, return windows, return conditions, or how to return items.\n- SearchRefundPolicy: Use when customers ask about refunds, refund timelines, refund methods, or refund eligibility.\n- SearchOrderCancellationPolicy: Use when customers ask about cancelling orders, cancellation windows, or cancellation fees.\n\nIMPORTANT INSTRUCTIONS:\n1. Always use the appropriate tool to find accurate policy information before answering policy-related questions.\n2. Base your answers on the retrieved policy information.\n3. ALWAYS cite your sources at the end of your response. When you use information from the Knowledge Base, add a 'Sources' section at the end with the policy name and section titles you used.\n4. Format your source citations like this:\n   ðŸ“š **Sources:**\n   - [Policy Name] > Section Title\n5. If the question is general and doesn't require policy lookup, respond naturally without sources.",
        "Temperature": 0.7,
        "MaxOutputTokens": 1200,
        "Version": "1.0.0",
        "Streaming": false,
        "Url": "http://localhost:5016/a2a/customerSupportAgent",
        "SkillId": "customer_support_agent_assist",
        "SkillName": "CustomerAssist",
        "SkillDescription": "Handles general customer inquiries, provides product information, and assists with common issues using a knowledge base of company policies.",
        "Tags": ["support", "customer-service", "help", "policies"],
        "Examples": [
          "I need help with my order",
          "How do I track my shipment?",
          "What is your return policy?",
          "Can I get a refund?",
          "How do I cancel my order?"
        ]
      },
      "history": {
        "AgentId": "history",
        "Name": "History Agent",
        "Description": "Expert historian answering questions about world history with conversation memory.",
        "Instructions": "You are an expert historian specializing in world history. Answer questions about historical events, figures, civilizations, and eras with accurate, detailed information. You remember the conversation context, so you can refer back to previous topics discussed. If asked about non-history topics, politely redirect to historical subjects.",
        "Temperature": 0.7,
        "MaxOutputTokens": 1500,
        "Version": "1.0.0",
        "Streaming": true,
        "Url": "http://localhost:5016/a2a/historyAgent",
        "SkillId": "history_agent_answer",
        "SkillName": "HistoryExpert",
        "SkillDescription": "Answers questions about world history with conversation memory. Remembers previous topics discussed in the same conversation.",
        "Tags": ["history", "education", "knowledge", "conversation"],
        "Examples": [
          "Tell me about the Roman Empire",
          "Who was Napoleon Bonaparte?",
          "What caused World War I?",
          "When did the Renaissance begin?",
          "Tell me more about that"
        ]
      },
      "order": {
        "AgentId": "order",
        "Name": "Order Agent",
        "Description": "SpÃ©cialiste des commandes : rÃ©cupÃ¨re les informations de commande, les statuts, et recherche les commandes par client.",
        "Instructions": "ALWAYS RESPOND IN FRENCH. You are an order specialist.\n\nYour mission: Provide accurate information about customer orders.\n\n**AVAILABLE TOOLS:**\n- GetOrderById: Retrieves complete order details\n- GetOrderStatus: Retrieves current order status\n- SearchOrdersByCustomer: Finds all orders for a customer\n\n**RULES:**\n1. Always ask for the order number if the customer hasn't provided it\n2. Present information clearly and structured\n3. If no order is found, ask the customer to verify the order number",
        "Temperature": 0.5,
        "MaxOutputTokens": 1000,
        "Version": "1.0.0",
        "Streaming": true,
        "Url": "http://localhost:5016/a2a/orderAgent",
        "SkillId": "order_agent_retrieve",
        "SkillName": "OrderRetrieval",
        "SkillDescription": "Retrieves order information, status, and searches orders by customer.",
        "Tags": ["orders", "status", "tracking", "customer-orders"],
        "Examples": [
          "OÃ¹ en est ma commande ORD-2026-001 ?",
          "Quel est le statut de ma livraison ?",
          "Trouve mes commandes",
          "DÃ©tails de ma commande"
        ]
      },
      "policy": {
        "AgentId": "policy",
        "Name": "Policy Agent",
        "Description": "Expert des politiques de l'entreprise : retours, remboursements, et annulations de commande.",
        "Instructions": "ALWAYS RESPOND IN FRENCH. You are a company policy expert.\n\nYour mission: Answer policy questions with precision.\n\n**AVAILABLE TOOLS:**\n- SearchReturnPolicy: Return policy\n- SearchRefundPolicy: Refund policy\n- SearchOrderCancellationPolicy: Cancellation policy\n\n**RULES:**\n1. Use the appropriate tool based on the customer's question\n2. Present information clearly and completely\n3. ALWAYS cite sources at the end of your response\n4. If the question concerns multiple policies, use multiple tools",
        "Temperature": 0.5,
        "MaxOutputTokens": 1200,
        "Version": "1.0.0",
        "Streaming": true,
        "Url": "http://localhost:5016/a2a/policyAgent",
        "SkillId": "policy_agent_search",
        "SkillName": "PolicySearch",
        "SkillDescription": "Searches and provides information about return, refund, and cancellation policies.",
        "Tags": ["policies", "returns", "refunds", "cancellation", "terms"],
        "Examples": [
          "Comment faire pour retourner un produit ?",
          "Quel est le dÃ©lai de remboursement ?",
          "Puis-je annuler ma commande ?",
          "Quelle est votre politique de retour ?"
        ]
      },
      "message-formulator": {
        "AgentId": "message-formulator",
        "Name": "Message Formulator Agent",
        "Description": "Aide les clients Ã  rÃ©diger des messages clairs et bien structurÃ©s pour contacter les vendeurs.",
        "Instructions": "ALWAYS RESPOND IN FRENCH. You are a specialist in writing messages to sellers.\n\nYour mission: Help the customer compose a clear and professional message.\n\n**CRITICAL RULE - NEVER INVENT OR GUESS:**\n- You must NEVER assume what the customer wants (exchange, refund, return, credit...)\n- If the customer has NOT explicitly said what they want â†’ you MUST ask them\n- NEVER write 'refund' or 'exchange' in the message if the customer hasn't said it themselves\n\n**IMPORTANT RULES:**\n1. **NEVER RE-ASK** for information already provided in the conversation\n2. **NEVER ask for photos/documents** - It's FORBIDDEN\n3. **THE 4 MANDATORY PIECES OF INFO** before generating a message:\n   - Affected product âœ“ or ?\n   - Exact problem âœ“ or ?\n   - Order number âœ“ or ?\n   - Desired action (exchange/refund/other) âœ“ or ?\n\n**PROCESS:**\n1. If ONE piece of info is missing â†’ ask the question, do NOT generate the message\n2. When you have ALL 4 pieces of info, generate the message with this format:\n\nðŸ“ **Message proposÃ© au vendeur:**\n\n[The message]\n\nðŸ’¡ **Le vendeur pourrait aussi demander:**\n- [element 1]\n- [element 2]\n\nCliquez sur le bouton Approuver pour envoyer ce message.\n\n**CUSTOMER NAME:** Provided in brackets [NOM DU CLIENT: xxx]. Use it to sign.\n\n**MODIFICATION REQUESTS:**\n- When the customer asks to modify a message you previously proposed, IMMEDIATELY regenerate the complete message with the requested changes\n- Look at the conversation history to find the message you previously proposed (it contains ðŸ“ or ðŸ“œ emoji)\n- Keep ALL the original information from the previous message (product, problem, order number, desired action)\n- Apply ONLY the requested modification:\n  * If they ask to change the signature: replace [NOM DU CLIENT: xxx] with the new name they provide\n  * If they ask to make it shorter: condense the message while keeping all essential info\n  * If they ask to change tone: adjust formality while keeping the same content\n- Do NOT ask for confirmation or clarification - just regenerate the message immediately\n- Always regenerate the FULL message in the same format (ðŸ“ **Message proposÃ© au vendeur:** followed by the modified message)\n- Examples: \"modifier la signature pour mettre Mohammed BEN SAID\", \"changer le nom en [nom]\", \"rendre plus court\", \"rendre plus formel\"",
        "Temperature": 0.7,
        "MaxOutputTokens": 1500,
        "Version": "1.0.0",
        "Streaming": true,
        "Url": "http://localhost:5016/a2a/messageFormulatorAgent",
        "SkillId": "message_formulator_compose",
        "SkillName": "MessageComposer",
        "SkillDescription": "Helps customers compose clear, well-structured messages to contact sellers.",
        "Tags": ["writing", "communication", "message-composition", "seller-contact"],
        "Examples": [
          "I want to complain about my order it was broken",
          "need to ask seller about delivery",
          "my product doesnt work what should i write",
          "yes send it",
          "can you make it shorter"
        ]
      },
      "orchestrator": {
        "AgentId": "orchestrator",
        "Name": "Orchestrator Agent",
        "Description": "Agent principal qui coordonne les agents spÃ©cialisÃ©s (commandes, politiques, rÃ©daction de messages) pour rÃ©pondre aux demandes des clients.",
        "Instructions": "You are an intelligent assistant. Your role is to route customer requests to the right specialized agent.\n\n**MANDATORY PROCESS - FOLLOW THESE STEPS IN ORDER (PRIORITY-BASED):**\n\n**STEP 0 (HIGHEST PRIORITY): Check for PROBLEM/PRODUCT ISSUE keywords**\nLook for: \"problÃ¨me\" OR \"dÃ©fectueux\" OR \"cassÃ©\" OR \"ne fonctionne pas\" OR \"endommagÃ©\" OR \"manquant\" OR \"mauvais\" OR \"incorrect\" OR \"Ã©crire au vendeur\" OR \"contacter le vendeur\" OR \"message au vendeur\" OR \"souhaite un remboursement\" (when combined with a problem)\n\nIF YOU FIND THESE PROBLEM KEYWORDS â†’ STOP â†’ Call message_formulator_agent IMMEDIATELY\nâš ï¸ IGNORE order numbers (ORD-XXX) or policy keywords if problem keywords are present!\n\nEXACT examples:\n- \"J'ai un problÃ¨me avec ma commande ORD-2026-001, le produit est dÃ©fectueux\" â†’ message_formulator_agent (NOT order_agent!)\n- \"Le CÃ¢ble USB-C est dÃ©fectueux et je souhaite un remboursement\" â†’ message_formulator_agent (NOT policy_agent!)\n- \"Mon produit est cassÃ©\" â†’ message_formulator_agent\n- \"Je veux Ã©crire au vendeur\" â†’ message_formulator_agent\n\n**STEP 1: Look for ORDER STATUS keywords (ONLY if NO problem keywords from Step 0)**\nLook for: \"statut\" OR \"oÃ¹ en est\" OR \"suivi\" OR \"livraison\" (WITHOUT problem keywords)\nIF YOU FIND THESE WORDS â†’ STOP â†’ Call order_agent IMMEDIATELY\n\nEXACT examples:\n- \"Je veux connaÃ®tre le statut de ma commande ORD-2026-001\" â†’ order_agent\n- \"OÃ¹ en est ma commande\" â†’ order_agent\n- \"Statut de livraison\" â†’ order_agent\n\n**STEP 2: Look for POLICY INFORMATION keywords (ONLY if NO problem keywords from Step 0)**\nLook for: \"comment\" OR \"conditions\" OR \"puis-je\" OR \"dÃ©lai\" OR \"politique\" + (\"retour\" OR \"remboursement\" OR \"annulation\")\nâš ï¸ BUT if \"remboursement\" is combined with a problem (dÃ©fectueux, cassÃ©, etc.) â†’ message_formulator_agent\n\nIF YOU FIND POLICY KEYWORDS (without problem) â†’ STOP â†’ Call policy_agent IMMEDIATELY\n\nEXACT examples:\n- \"Comment Ãªtre remboursÃ©\" (no problem mentioned) â†’ policy_agent\n- \"Quelles sont les conditions de retour\" â†’ policy_agent\n- \"Puis-je annuler ma commande\" â†’ policy_agent\n\n**STEP 3: Default fallback**\nIf NO keywords match steps 0, 1, or 2 â†’ Call message_formulator_agent\n\n**âš ï¸ CRITICAL RULES:**\n1. PROBLEM KEYWORDS HAVE HIGHEST PRIORITY - If customer mentions a problem, ALWAYS use message_formulator_agent\n2. Order numbers (ORD-XXX) alone don't mean order status - check for problem keywords first!\n3. \"Remboursement\" with a problem = message_formulator_agent, \"Remboursement\" as a question = policy_agent\n4. NEVER call multiple agents for the same request - choose ONE based on priority\n\n**TOOLS:**\n- message_formulator_agent: Product problems, defective items, contacting seller, issues requiring seller communication\n- order_agent: Order status, tracking, delivery information (ONLY when no problem mentioned)\n- policy_agent: Policy questions, general information about returns/refunds/cancellations (ONLY when no problem mentioned)",
        "Temperature": 0.2,
        "MaxOutputTokens": 2000,
        "Version": "1.0.0",
        "Streaming": true,
        "Url": "http://localhost:5016/a2a/orchestratorAgent",
        "SkillId": "orchestrator_agent_coordinate",
        "SkillName": "OrchestratorCoordinate",
        "SkillDescription": "Coordinates specialized agents to handle customer requests about orders, policies, and message composition.",
        "Tags": ["orchestration", "coordination", "multi-agent", "customer-support"],
        "Examples": [
          "OÃ¹ en est ma commande ORD-2026-001 ?",
          "Comment retourner un produit ?",
          "Je veux contacter le vendeur pour un problÃ¨me",
          "Puis-je annuler ma commande ?",
          "Aide-moi Ã  Ã©crire un message"
        ]
      }
    },
    "OrchestratorTools": {
      "Tools": {
        "order_agent": {
        "Name": "order_agent",
        "Description": "Agent for ORDERS and STATUS.\n\nCRITICAL: DO NOT USE if customer mentions a PROBLEM (defectueux, casse, probleme, etc.) - use message_formulator_agent instead!\n\nUse this agent ONLY when customer asks about ORDER STATUS/TRACKING (NO problem mentioned):\n- 'statut' + 'commande' (without problem keywords)\n- 'ou en est' + 'commande' (without problem keywords)\n- 'suivi' + 'livraison' (without problem keywords)\n- Order number (ORD-XXXX-XXX) when asking about status (NOT when reporting a problem)\n\nExamples YES (use this agent):\n- 'Ou en est ma commande ORD-2026-001 ?' YES\n- 'Je veux connaitre le statut de ma commande ORD-2026-001' YES\n- 'Quel est le statut de ma livraison ?' YES\n- 'Suivi de ma commande' YES\n\nExamples NO (use message_formulator_agent instead):\n- 'J'ai un probleme avec ma commande ORD-2026-001' NO -> message_formulator_agent\n- 'Le produit de ma commande est defectueux' NO -> message_formulator_agent\n- 'Comment etre rembourse ?' NO -> policy_agent\n- 'Je veux ecrire au vendeur' NO -> message_formulator_agent"
      },
      "policy_agent": {
        "Name": "policy_agent",
        "Description": "Agent specialized in POLICIES and CONDITIONS.\n\nCRITICAL: DO NOT USE if customer mentions a PROBLEM (defectueux, casse, probleme, etc.) - use message_formulator_agent instead!\n\nUse this agent ONLY when customer asks for GENERAL POLICY INFORMATION (NO problem mentioned):\n- RETURN policy (how to return, return deadline, conditions)\n- REFUND policy (how to get refunded, timeline, conditions)\n- CANCELLATION policy (how to cancel, when can you cancel, fees)\n- General RIGHTS and CONDITIONS\n\nQuestion examples (NO problem mentioned):\n- 'Comment faire pour retourner un produit ?' YES\n- 'Quelles sont les conditions pour etre rembourse ?' YES\n- 'Quel est le delai de remboursement ?' YES\n- 'Puis-je annuler ma commande ?' YES\n- 'Quelle est votre politique de retour ?' YES\n\nExamples NO (use message_formulator_agent instead):\n- 'Le produit est defectueux et je souhaite un remboursement' NO -> message_formulator_agent\n- 'J'ai un probleme, comment etre rembourse ?' NO -> message_formulator_agent\n- 'Mon produit est casse, quelle est la politique ?' NO -> message_formulator_agent\n\nTHIS AGENT RESPONDS DIRECTLY with official information.\nDO NOT USE for: writing a message to the seller, getting order status, or when customer has a specific problem."
      },
      "message_formulator_agent": {
        "Name": "message_formulator_agent",
        "Description": "Agent to HELP WRITE a message to the SELLER.\n\nHIGHEST PRIORITY: Use this agent when customer mentions a PROBLEM, even if they also mention order numbers or refund requests!\n\nUse this agent when the customer has a PROBLEM that requires CONTACTING THE SELLER:\n- Broken/defective/damaged product (casse, defectueux, endommage)\n- Quality issue (ne fonctionne pas, mauvais)\n- Product doesn't match description\n- Wrong product received\n- Missing parts (manquant)\n- Specific question about the product\n- Special request to the seller\n- Wants refund/return BECAUSE of a problem\n\nExamples YES (contact the seller - PROBLEM KEYWORDS PRESENT):\n- 'J'ai un probleme avec ma commande ORD-2026-001, le produit est defectueux' YES (order number + problem = use this!)\n- 'Le Cable USB-C est defectueux et je souhaite un remboursement' YES (refund + problem = use this!)\n- 'Mon produit est casse' YES\n- 'Le produit ne fonctionne pas' YES\n- 'Ce n'est pas ce que j'ai commande' YES\n- 'Il manque des pieces' YES\n- 'Je veux ecrire au vendeur' YES\n- 'Le produit ne correspond pas a la description' YES\n\nExamples NO (answer directly, no need for seller - NO problem mentioned):\n- 'Ou en est ma commande ?' NO -> order_agent\n- 'Comment etre rembourse ?' (general question, no problem) NO -> policy_agent\n- 'Puis-je annuler ma commande ?' NO -> policy_agent\n- 'Quel est le statut de ma livraison ?' NO -> order_agent\n\nRULE: If customer mentions a PROBLEM (defectueux, casse, probleme, etc.), ALWAYS use this agent, even if order number or 'remboursement' is also mentioned!"
        }
      }
    }
  },

  "Security": {
    "ContextIdSigningKey": "Demo-Secret-Key-2026-For-AI-Agents-Project-Min-32-Chars-Required!"
  },

  "AllowedHosts": "*"
}
